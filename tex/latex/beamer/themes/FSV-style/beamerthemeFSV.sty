\ProvidesPackage{beamerthemeFSV}

% ========= Pakker (IKKE pgfpages her) =========
\RequirePackage{tikz,pgfplots,siunitx,graphicx,hyperref,xcolor,currfile}
\RequirePackage[norsk]{babel}

% ========= Filstier og logo =========
\makeatletter
\def\FSV@logopath{\currfileabsdir}
\graphicspath{{\FSV@logopath}}
\makeatother

% ========= Farger =========
\definecolor{fsvdarkgreen}{HTML}{226051}
\definecolor{fsvgreen}{HTML}{049F7F}
\definecolor{fsvlightgreen}{HTML}{C1F6E2}
\definecolor{fsvdarkgray}{HTML}{2E333A}
\definecolor{fsvmidgray}{HTML}{ABADB0}
\definecolor{fsvlightgray}{HTML}{CCCCCC}
\definecolor{fsvyellow}{HTML}{E3DE24}
\definecolor{fsvlightyellow}{HTML}{F6F8AF}
\definecolor{fsvpurple}{HTML}{D959E8}
\definecolor{fsvlightpurple}{HTML}{ECDCF9}

\makeatletter
\def\beamer@framenotesbegin{% at beginning of slide
  \usebeamercolor[fg]{normal text}%
  \gdef\beamer@noteitems{}%
  \gdef\beamer@notes{}%
}
\makeatother

% --- Hvit bakgrunn og normal tekstfarge ---
\setbeamercolor{background canvas}{bg=white}
\setbeamertemplate{background canvas}[default]

% ========= Grunnstruktur =========
\useoutertheme{default} % <-- reserverer plass til head/foot

\setbeamercolor{title}{fg=fsvdarkgreen}
\setbeamerfont{title}{series=\bfseries,size=\huge}

\setbeamercolor{frametitle}{fg=fsvgreen}
\setbeamerfont{frametitle}{series=\bfseries,size=\Large}

\setbeamercolor{structure}{fg=fsvdarkgreen}
\setbeamercolor{item}{fg=fsvgreen}

% ========= Frametitellinje =========
\setbeamertemplate{frametitle}{%
  \vskip1ex%
  \insertframetitle\par
  {\color{fsvdarkgreen}\rule{\linewidth}{0.8pt}}%
}

% ========= Footline =========
\setbeamertemplate{footline}{
  \leavevmode
  \begin{beamercolorbox}[wd=\paperwidth,ht=1cm,dp=0.2cm]{footline}
    \hbox to \paperwidth{%
      \hspace{0.5cm}%
      \raisebox{-0.10cm}{\includegraphics[height=0.7cm]{fsv_logo.jpg}}%
      \hfill
      \raisebox{0.20cm}{\tiny\textsf{HØYERE YRKESFAGLIG UTDANNING}}%
      \hspace{0.5cm}%
    }%
  \end{beamercolorbox}
}

% ========= Headline =========
\makeatletter
\defbeamertemplate*{headline}{FSVheadline}{%
  \ifnum\insertpagenumber=1
    % Skjul på tittelbildet – bruk [plain] i .tex om du vil styre dette pr. frame
  \else
    \leavevmode
    \begin{beamercolorbox}[wd=\paperwidth,ht=2.5ex,dp=1ex,leftskip=0.5cm,rightskip=0.5cm]{section in head/foot}
      \usebeamerfont{section in head/foot}%
      \insertshorttitle%
      \ifx\insertsubtitle\@empty\else\ -- \insertsubtitle\fi%
      \hfill
      \ifdefined\authshort
        \authshort\ \the\year%
      \else
        \insertshortauthor\ \the\year%
      \fi
    \end{beamercolorbox}
  \fi
}
\setbeamertemplate{headline}[FSVheadline]
\makeatother

% ========= Farger/Font for toppen (etter headline) =========
\setbeamercolor{section in head/foot}{fg=white,bg=fsvdarkgreen}
\setbeamercolor{subsection in head/foot}{fg=white,bg=fsvgreen}
\setbeamerfont{section in head/foot}{series=\bfseries}
\setbeamerfont{subsection in head/foot}{series=\mdseries}

% ========= Navigasjon =========
\setbeamertemplate{navigation symbols}{}
